 <!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"> 
	<div th:fragment="mypageModals">
		
		
		<!-- Modal [관리자용 개인정보] -->
	    <div class="modal fade" id="employeeUpdateAdminModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h5 class="modal-title" id = "adminModalTitle"></h5>
		        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		      </div>
		      <div class="modal-body" style="padding-bottom: 0;">
				 <div class="mb-3 row">
				    <div class="col-sm-10 w-100">
						
						<form action="mypage.admin.infomation.update" method="post"
						name = "infomationUpdateForm" id="infomationUpdateForm">
						
						<div class = "d-flex mb-2">
							
								<!-- 이름 -->
								<input type="text" class="form-control w-25" placeholder="성명" name="employeeName"
								id = "admininputUpdateName" th:readonly="${employee.manageNo < 11}" >
								
									
								<!-- 사번 -->
							  	<input type="text" class="form-control w-50 ms-2" placeholder="사번" name="employeeNo"
							  	id = "admininputUpdateNo" th:readonly="${employee.manageNo < 11}">
							  		
							  		
							  		
							<select class="form-select w-25 ms-2" aria-label="직급" id="admininputUpdateManage" name="manageNo" th:disabled="${employee.manageNo < 11}">
								<th:block th:each="manage : ${manages}">
									<option th:text="${manage.manage}" th:value="${manage.manageNo}" selected></option> 
								</th:block>
							</select>

						</div>
								
							<!-- 아이디 -->
							<input type="text" class="form-control mb-2"  name="employeeId"
							id = "admininputUpdateId" th:readonly="${employee.manageNo < 11}">
							  
							<!-- 비밀번호 -->
							<input type="text" class="form-control mb-2" name="employeePw"
							  placeholder="비밀번호" id = "admininputUpdatePw" th:readonly="${employee.manageNo < 11}">
							  
							  <!-- 연락처 -->
							  <input type="number " class="form-control mb-2" placeholder="연락처"  name="employeePhone"
							   id = "admininputUpdatePhone" th:readonly="${employee.manageNo < 11}">
							  
							  <!-- 이메일 -->
							  <input type="email" class="form-control mb-2" placeholder="이메일"  name="employeeEmail"
							   id = "admininputUpdateEmail" th:readonly="${employee.manageNo < 11}">
							  
							  <!-- 자택주소 -->
							  <input type="text" class="form-control mb-2" placeholder="자택주소"  name="employeeAddr"
							   id = "admininputUpdateAddr" th:readonly="${employee.manageNo < 11}">
							  
							  	<div class = "d-flex mb-2">
									  
									  
							<select class="form-select w-50" aria-label="부서" id="admininputUpdateTeam" name="employeeTeam" 
							th:disabled="${employee.manageNo < 11}">
								
								<option value="경영 지원-경영 관리">경영 지원-경영 관리</option>
								<option value="경영 지원-정보 보안">경영 지원-정보 보안</option> 
								<option value="경영 지원-구매팀">경영 지원-구매팀</option>
								<option value="경영 지원-재무 회계">경영 지원-재무 회계</option> 
								<option value="개발 연구-개발 1팀">개발 연구-개발 1팀</option> 
								<option value="개발 연구-개발 2팀">개발 연구-개발 2팀</option> 
								<option value="개발 연구-연구팀">개발 연구-연구팀</option> 
								<option value="영업-홍보 마케팅">영업-홍보 마케팅</option> 
								<option value="영업-해외 사업">영업-해외 사업</option> 
							
							</select>
				
									<!-- 관리자 -->
							  		<input type="number" class="form-control w-50 ms-2" placeholder="관리자"  name="employeeAdmin"
							  		id = "admininputUpdateAdmin">
							  		
								</div>
					
					  </form>

				      <p style="margin: 0.5rem 0 0 0.3rem; font-size: 0.8rem;" th:if="${employee.manageNo >= 11}">비밀번호는 영어 소문자/숫자 조합으로 8~16자리입니다.</p>
				      <p style="margin: 0.5rem 0 0 0.3rem; font-size: 0.8rem;" th:if="${employee.manageNo >= 11}">연락처는 (010-xxxx-xxxx)로 입력해주세요.</p>
				      
				    </div>
				  </div>
		      </div>
		      <div class="modal-footer">
				<button id = "AdminbuttonUpdateSuccess" type="button" class="btn btn-primary" style="background-color: #EA471B;" th:if="${employee.manageNo >= 11}">수정완료</button>
		      </div>
		    </div>
		  </div>
		</div>
		
		
		<!-- Modal [개인 정보] -->
	    <div class="modal fade" id="employeeUpdateModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h5 class="modal-title">내 정보</h5>
		        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		      </div>
		      <div class="modal-body" style="padding-bottom: 0;">
				 <div class="mb-3 row">
				    <div class="col-sm-10 w-100">
						
						<form action="mypage.infomation.update" method="post"
						name = "infomationUpdateForm" >
						
						<div class = "d-flex mb-2">
							
								<!-- 이름 -->
								<input type="text" class="form-control w-25" placeholder="성명" name="employeeName"
								th:value="${employee.getEmployeeName}" id = "inputUpdateName" readonly>
									
								<!-- 사번 -->
							  	<input type="text" class="form-control w-50 ms-2" placeholder="사번" name="employeeNo"
							  	th:value="${employee.getEmployeeNo}" id = "inputUpdateNo" readonly>
							  		
							  	<!-- 직급 넘버 보여주기식 -->
								<input type="text" class="form-control w-25 ms-2"
									th:value="${manageName}" readonly>
									
								<input type="hidden" th:value="${employee.getManageNo}" name = "manageNo">
						</div>
								
							<!-- 아이디 -->
							<input type="text" class="form-control mb-2"  name="employeeId"
							th:value="${employee.getEmployeeId}" id = "inputUpdateId" readonly>
							  
							<!-- 비밀번호 -->
							<input type="password" class="form-control mb-2"  name="employeePw"
							  placeholder="비밀번호" id = "inputUpdatePw" readonly>
							  
							  <!-- 연락처 -->
							  <input type="number " class="form-control mb-2" placeholder="연락처"  name="employeePhone"
							  th:value="${employee.getEmployeePhone}" id = "inputUpdatePhone" readonly>
							  
							  <!-- 이메일 -->
							  <input type="email" class="form-control mb-2" placeholder="이메일"  name="employeeEmail"
							  th:value="${employee.getEmployeeEmail}" id = "inputUpdateEmail" readonly>
							  
							  <!-- 자택주소 -->
							  <input type="text" class="form-control mb-2" placeholder="자택주소"  name="employeeAddr"
							  th:value="${employee.getEmployeeAddr}" id = "inputUpdateAddr" eadonly>
							  
							  	<div class = "d-flex mb-2">
									  
									<!-- 부서 -->
									<input type="text" class="form-control w-50" placeholder="부서"  name="employeeTeam"
									th:value="${employee.getEmployeeTeam}" id = "inputUpdateTeam" readonly>
									
									<!-- 관리자 -->
							  		<input type="number" class="form-control w-50 ms-2" placeholder="관리자"  name="employeeAdmin"
							  		th:value="${employee.getEmployeeAdmin}" id = "inputUpdateAdmin" readonly>
							  		
								</div>
					
					  </form>
				      <p style="margin: 0.5rem 0 0 0.3rem; font-size: 0.8rem;">비밀번호, 연락처, 이메일, 주소를 변경할 수 있습니다.</p>
				      <p style="margin: 0.5rem 0 0 0.3rem; font-size: 0.8rem;">비밀번호는 영어 소문자/숫자 조합으로 8~16자리입니다.</p>
				      <p style="margin: 0.5rem 0 0 0.3rem; font-size: 0.8rem;">연락처는 (010-xxxx-xxxx)로 입력해주세요.</p>
				      
				    </div>
				  </div>
		      </div>
		      <div class="modal-footer">
				<button id = "buttonUpdateSuccess" type="button" class="btn btn-primary" style="background-color: #EA471B;" disabled>수정완료</button>
		        <button id = "buttonUpdate" type="button" class="btn btn-primary" style="background-color: #EA471B;">수정하기</button>
		      </div>
		    </div>
		  </div>
		  
		  <script>
			  $('#AdminbuttonUpdateSuccess').click(function(){
				  
				  	var pw = $('#admininputUpdatePw').val();
					var pw_length = pw.length;
						
					var phone = $('#admininputUpdatePhone').val();
						
					var email = $('#admininputUpdateEmail').val();
						
					if(pw_length < PasswordChange_Min){
						alert( "비밀번호가 너무 적습니다 " + PasswordChange_Min + " 글자 이상을 입력해주세요.");
						return
					}else if(pw_length > PasswordChange_Max){
						alert( "비밀번호가 너무 깁니다" + PasswordChange_Max + "글자 이하로 입력해주세요.");
						return
					}else if(!english.test(pw)){
						alert( "비밀번호가 영문이 포함되어있지 않습니다");
						return
					}else if(!number.test(pw)){
						alert( "비밀번호가 숫자가 포함되어있지 않습니다.");
						return
					}else if(special.test(pw)){
						alert("비밀번호가 특수문자가 포함되어 있습니다.");
						return
					}else if(!phone_regex.test(phone)){
						alert("연락처 방식이 맞지않습니다.");
						returnx
					}else if((!email.includes('@')) || !email.includes('.com')){
						alert("이메일 형식이 올바르지 않습니다.");
						return
					}
					alert("수정이 완료되었습니다.")
					
					
					
				  $('#infomationUpdateForm').submit();
				  
			  })
			  
			  $('#admininputUpdateAdmin').click(function(){
				  $('#offcanvasRightSearch').offcanvas('hide');
				  $('#employeeUpdateAdminModal').modal('hide');
				  $('#offcanvasRightUpdate').offcanvas('show');
			  })
			  
			  
		  </script>
		</div>
		
	  
</html>