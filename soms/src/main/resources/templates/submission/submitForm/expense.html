<!DOCTYPE html>
<html th:replace="~{submission/layout/mainLayout :: layout(~{::title}, ~{::section})}" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>

<section class="Article">
  <div style="width:90%; margin-left: 5%">

    <div class="position-fixed bg-white" style="width:78.8%">
      <!-- 페이지 본문의 제목 -->
      <div>
        <h1 class="pt-4 px-4 text-start">결재 작성</h1>
      </div>
      <!-- 본문의 제목과 내용을 구분하는 선 -->
      <hr style="border: solid 1px #EA471B; opacity: 1; margin:0;">
    </div>
    <!-- 본문의 내용 위치를 잡기위해 만든 상담 공백 -->
    <div style="height:5rem;"></div>


    <div class="text-center">
      <h2 class="font-monospace my-5">지출결의서</h2>
      <form method="post" th:action="@{/submission/approval/expenseSubmit}">
        <!-- 지출결의서 폼 -->
      <div style="display:flex; height:8rem;" class="align-middle border">

        <!-- 기안자 정보 항목 -->
        <div style="width:10%;">
          <div style="height:25%" class="border"></div>
          <div style="height:25%; font-size: 1rem;" class="border"><p class="my-1">부서</p></div>
          <div style="height:25%; font-size: 1rem;" class="border"><p class="my-1">직급</p></div>
          <div style="height:25%; font-size: 1rem;" class="border"><p class="my-1">이름</p></div>
        </div>

        <!-- 기안자 정보 -->
        <div style="width:30%">
          <div style="width:100%; height:25%; font-size: 0.7rem;" class="border">
            <p class="my-2" id="" th:text="|${datetime} ${employee.getEmployeeNo()}|"></p>
          </div>
          <div style="width:100%; height:25%; font-size: 1rem;" class="border"><p class="my-1" th:text="${employee.getEmployeeTeam()}">경영지원</p></div>
          <div style="width:100%; height:25%; font-size: 1rem;" class="border"><p class="my-1" th:text="${employee.getManage()}">대리</p></div>
          <div style="width:100%; height:25%; font-size: 1rem;" class="border"><p class="my-1" th:text="${employee.getEmployeeName()}">김희용</p></div>
          <input type="hidden" name="submissionPri" th:value="|${datetime} ${employee.getEmployeeNo()}|">
          <input type="hidden" name="employeeNo" th:value="${employee.getEmployeeNo()}">
          <input type="hidden" name="submissionDatetime" th:value="${datetime}">
        </div>

        <!-- 결재 라인 -->
        <div style="width:5%" class="border">
          <p class="my-5" style="font-size: 1rem;">결재</p>
        </div>
        <div style="width:55%; display:flex;" class="border-start">
          <div th:each="approver : ${approvers}" style="width:12.5%; font-size: 3px;">
            <select th:name="|submissionSection${approverStat.index}|" class="text-center border border-start-0 rounded-0 w-100 m-0" style="height:20%; font-size: 0.62rem;">
              <option value="결재">결재</option>
              <option value="검토">검토</option>
            </select>
            <input type="text" th:value="${approver.employeeName}" style="height:60%;"
                   class="border border-start-0 w-100 text-center" readonly>
            <input type="hidden" th:name="|approver${approverStat.index}|" th:value="${approver.employeeNo}">
            <button style="height:20%; font-size: 0.7rem;" class="w-100 border border-start-0 bg-transparent">변경</button>
          </div>
          <div th:each="i : ${#numbers.sequence((approvers.size()), 7)}" style="width:12.5%; font-size: 3px;">
            <select th:name="|submissionSection${i}|" class="text-center border border-start-0 rounded-0 w-100 m-0" style="height:20%; font-size: 0.62rem;">
              <option value="결재">결재</option>
              <option value="검토">검토</option>
            </select>
            <input type="text" value="" style="height:60%;"
                   class="border border-start-0 w-100 text-center" readonly>
            <input type="hidden" th:name="|approver${i}|" value="">
            <button style="height:20%; font-size: 0.7rem;" class="w-100 border border-start-0 bg-transparent">추가</button>
          </div>
        </div>
      </div>

        <!-- 지출구분과 지출일자를 선택하는 영역 -->
      <div style="height:4rem; justify-content: space-around; align-items: center;" class="border border-2 border-top-0 d-flex">
        <div class="d-flex align-middle justify-content-center">
          <p class="m-0" style="font-size: 0.9rem; width:5rem;">지출 구분 : </p>
          <select name="expenseSection" class="border-0 border-bottom" style="font-size: 0.7rem;">
            <option value="법인카드">법인카드</option>
            <option value="개인현금">개인현금</option>
          </select>
        </div>
        <div class="d-flex align-middle justify-content-center">
          <p class="m-0" style="font-size: 0.9rem; width:5rem;">지출 일자 : </p>
          <input type="date" id="expenseDate" name="expenseDate" th:max="${date}" class="border-0 border-bottom" style="font-size: 0.7rem; outline:none;">
        </div>
      </div>

      <!-- 내용을 입력하는 텍스트 상자 영역 -->
      <div style="height:20rem; display:flex; justify-content: center; align-items: center;" class="border border-2 border-top-0">
        <textarea class="w-100 h-100 border-0 p-3" id="expenseContent" name="expenseContent" style="outline: none; resize: none; font-size: 0.9rem;"></textarea>
      </div>

      <div style="height:4rem; display:flex; justify-content: center; align-items: center;" class="border border-2 border-top-0">

        <!-- 지출 합계를 입력하는 영역 -->
        <div class="d-flex w-75 justify-content-center align-middle">
          <p class="m-0 ms-3"  style="font-size: 0.9rem; width:5rem;">프로젝트명 : </p>
          <input type="text" name="submissionPjt" class="ms-1 border-0 border-bottom text-center" style="font-size: 0.7rem; outline:none; width:7rem;">
          <p class="m-0 ms-3" style="font-size: 0.9rem; width:5rem;">합계 : </p>
          <input type="text" name="expenseCost" class="ms-1 border-0 border-bottom text-center" style="font-size: 0.7rem; outline:none; width:7rem;">
          <p class="m-0" style="font-size: 0.9rem;">원</p>
        </div>

        <!-- 신청서 상신 및 취소 버튼 -->
        <div class="h-100 w-25 d-flex">
          <button class="btn btn-outline-dark border w-50 h-100 rounded-0 text-light" style="background-color: #E86E1C">
            취소
          </button>
          <button type="submit" class="btn btn-outline-dark border w-50 h-100 rounded-0 text-light" style="background-color: #EA471B">
            상신
          </button>
        </div>
      </div>
      </form>
      <div style="height:4rem;"></div>

<!--      <script th:inline="javascript">-->
<!--          function submit() {-->
<!--              let approvers = [];-->
<!--              let submissionSection = [];-->
<!--              for (let i = 0; i < 8; i++) {-->
<!--                  if ($('#approver' + i).val() != null && $('#approver' + i).val() != "") {-->
<!--                    approvers[i] = $('#approver' + i).val();-->
<!--                    submissionSection[i] = $('#submissionSection' + i).val();-->
<!--                  }-->
<!--              }-->
<!--              $.ajax({-->
<!--                  url: "expenseSubmit",-->
<!--                  type: 'POST',-->
<!--                  dataType: 'json',-->
<!--                  contentType: 'application/json',-->
<!--                  data: JSON.stringify({-->
<!--                      "id" : "id",-->
<!--                      "submissionPri" : $('#submissionPri').val(),-->
<!--                      "submissionDatetime" : [[${datetime}]],-->
<!--                      "submissionPjt" : $('#submissionPjt').val(),-->
<!--                      "expenseSection" : $('select[name=expenseSection]').val(),-->
<!--                      "expenseDate" : $('#expenseDate').val(),-->
<!--                      "expenseCost" : $('#expenseCost').val(),-->
<!--                      "expenseContent" : $('#expenseContent').val(),-->
<!--                      "employeeNo" : [[${employee.getEmployeeNo()}]],-->
<!--                      "approvers" : approvers,-->
<!--                      "submissionSections" : submissionSection-->
<!--                  }),-->
<!--                  success:function() {-->

<!--                  }-->
<!--              })-->
<!--          }-->
<!--      </script>-->
    </div>
  </div>






</section>

</body>
</html>